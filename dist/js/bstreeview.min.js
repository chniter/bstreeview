/*! @preserve
 * bstreeview.js
 * Version: 1.2.0
 * Authors: Sami CHNITER <sami.chniter@gmail.com>
 * Copyright 2020
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 */
!function($,window,document,undefined){"use strict";var defaults={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},templates_treeviewItem='<div role="treeitem" class="list-group-item" data-toggle="collapse"></div>',templates_treeviewGroupItem='<div role="group" class="list-group collapse" id="itemid"></div>',templates_treeviewItemStateIcon='<i class="state-icon"></i>',templates_treeviewItemIcon='<i class="item-icon"></i>';function bstreeView(element,options){this.element=element,this.itemIdPrefix=element.id+"-item-",this.settings=$.extend({},defaults,options),this.init()}$.extend(bstreeView.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=$.parseJSON(this.settings.data)),this.tree=$.extend(!0,[],this.settings.data),delete this.settings.data),$(this.element).addClass("bstreeview"),this.initData({nodes:this.tree});var _this=this;this.build($(this.element),this.tree,0),$(this.element).on("click",".list-group-item",(function(e){$(".state-icon",this).toggleClass(_this.settings.expandIcon).toggleClass(_this.settings.collapseIcon),e.target.hasAttribute("href")&&(_this.settings.openNodeLinkOnNewTab?window.open(e.target.getAttribute("href"),"_blank"):window.location=e.target.getAttribute("href"))}))},initData:function(node){if(node.nodes){var parent=node,_this=this;$.each(node.nodes,(function(index,node){node.nodeId=_this.nodes.length,node.parentId=parent.nodeId,_this.nodes.push(node),node.nodes&&_this.initData(node)}))}},build:function(parentElement,nodes,depth){var _this=this,leftPadding=_this.settings.parentsMarginLeft;depth>0&&(leftPadding=(_this.settings.indent+depth*_this.settings.indent).toString()+"rem;"),depth+=1,$.each(nodes,(function(id,node){var treeItem=$(templates_treeviewItem).attr("data-target","#"+_this.itemIdPrefix+node.nodeId).attr("style","padding-left:"+leftPadding).attr("aria-level",depth);if(node.nodes){var treeItemStateIcon=$(templates_treeviewItemStateIcon).addClass(_this.settings.collapseIcon);treeItem.append(treeItemStateIcon)}if(node.icon){var treeItemIcon=$(templates_treeviewItemIcon).addClass(node.icon);treeItem.append(treeItemIcon)}if(treeItem.append(node.text),node.href&&treeItem.attr("href",node.href),node.class&&treeItem.addClass(node.class),node.id&&treeItem.attr("id",node.id),parentElement.append(treeItem),node.nodes){var treeGroup=$(templates_treeviewGroupItem).attr("id",_this.itemIdPrefix+node.nodeId);parentElement.append(treeGroup),_this.build(treeGroup,node.nodes,depth)}}))}}),$.fn.bstreeview=function(options){return this.each((function(){$.data(this,"plugin_bstreeview")||$.data(this,"plugin_bstreeview",new bstreeView(this,options))}))}}(jQuery,window,document);
